{"version":3,"sources":["webpack:///src/pages/login.vue","webpack:///./src/pages/login.vue?94f5","webpack:///./src/pages/login.vue"],"names":["REG","isMobile","isPassword","login","name","data","valid","showPassword","mobile","mobileRules","v","test","password","passwordRules","components","methods","extends_default","Object","vuex_esm","submit","_this","this","$refs","form","validate","_data","core_api","then","setUserInfo","user","setUserToken","token","code","$route","query","redirect","startsWith","$router","push","path","computed","created","sessionStorage","clear","pages_login","render","_vm","_h","$createElement","_c","_self","attrs","id","fluid","fill-height","align-center","justify-center","xs12","sm8","md4","dark","color","_v","_s","title","ref","lazy-validation","model","value","callback","$$v","expression","prepend-icon","label","rules","required","type","append-icon","on","click:append","$event","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"sJAoCAA,GACAC,SAAA,oBACAC,WAAA,aAGAC,GACAC,KAAA,QACAC,KAFA,WAGA,OACAC,OAAA,EACAC,cAAA,EACAC,OAAA,GACAC,aACA,SAAAC,GAAA,QAAAA,GAAA,WACA,SAAAA,GAAA,OAAAV,EAAAC,SAAAU,KAAAD,IAAA,aAEAE,SAAA,GACAC,eACA,SAAAH,GAAA,QAAAA,GAAA,UACA,SAAAA,GAAA,OAAAV,EAAAE,WAAAS,KAAAD,IAAA,kBAIAI,cACAC,QAAAC,OACAC,OAAAC,EAAA,EAAAD,EACA,cACA,kBAEAE,OALA,WAKA,IAAAC,EAAAC,KACA,GAAAA,KAAAC,MAAAC,KAAAC,WAAA,CACA,IAAAC,GACAjB,OAAAa,KAAAb,OACAI,SAAAS,KAAAT,UAGQK,OAAAS,EAAA,EAAAT,CAARQ,GAAAE,KAAA,SAAAtB,GAEAe,EAAAQ,YAAAvB,OAAAwB,MACAT,EAAAU,aAAAzB,OAAA0B,OACA,IAAA1B,EAAA2B,OACAZ,EAAAa,OAAAC,MAAAC,WAAAf,EAAAa,OAAAC,MAAAC,SAAAC,WAAA,UACAhB,EAAAiB,QAAAC,MAAAC,KAAAnB,EAAAa,OAAAC,MAAAC,WAEAf,EAAAiB,QAAAC,MAAAC,KAAA,sBAOAC,SAAAxB,OACAC,OAAAC,EAAA,EAAAD,EACA,WAGAwB,QAnDA,WAoDApB,KAAAO,gBACAP,KAAAS,aAAA,MACAY,eAAAC,UC5FeC,GADEC,OAFjB,WAA0B,IAAAC,EAAAzB,KAAa0B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,SAAmBE,OAAOC,GAAA,aAAgBH,EAAA,aAAAA,EAAA,eAAoCE,OAAOE,MAAA,GAAAC,cAAA,MAA6BL,EAAA,YAAiBE,OAAOI,eAAA,GAAAC,iBAAA,MAAuCP,EAAA,UAAeE,OAAOM,KAAA,GAAAC,IAAA,GAAAC,IAAA,MAA6BV,EAAA,UAAAA,EAAA,aAA+BE,OAAOS,KAAA,GAAAC,MAAA,aAA6BZ,EAAA,mBAAAH,EAAAgB,GAAAhB,EAAAiB,GAAAjB,EAAAkB,WAAA,GAAAlB,EAAAgB,GAAA,KAAAb,EAAA,eAAAA,EAAA,UAAmGgB,IAAA,OAAAd,OAAkBe,kBAAA,IAAqBC,OAAQC,MAAAtB,EAAA,MAAAuB,SAAA,SAAAC,GAA2CxB,EAAAxC,MAAAgE,GAAcC,WAAA,WAAqBtB,EAAA,gBAAqBE,OAAOqB,eAAA,QAAAC,MAAA,MAAAC,MAAA5B,EAAArC,YAAAkE,SAAA,IAA2ER,OAAQC,MAAAtB,EAAA,OAAAuB,SAAA,SAAAC,GAA4CxB,EAAAtC,OAAA8D,GAAeC,WAAA,YAAsBzB,EAAAgB,GAAA,KAAAb,EAAA,gBAAiCE,OAAOqB,eAAA,OAAAC,MAAA,KAAAG,KAAA,WAAAF,MAAA5B,EAAAjC,cAAA8D,SAAA,GAAAE,cAAA/B,EAAAvC,aAAA,8BAAAqE,KAAA9B,EAAAvC,aAAA,mBAA4MuE,IAAKC,eAAA,SAAAC,GAAgClC,EAAAvC,cAAAuC,EAAAvC,eAAsC4D,OAAQC,MAAAtB,EAAA,SAAAuB,SAAA,SAAAC,GAA8CxB,EAAAlC,SAAA0D,GAAiBC,WAAA,eAAwB,OAAAzB,EAAAgB,GAAA,KAAAb,EAAA,kBAAAA,EAAA,YAAAH,EAAAgB,GAAA,KAAAb,EAAA,SAAkFE,OAAOU,MAAA,WAAkBiB,IAAKG,MAAAnC,EAAA3B,UAAoB2B,EAAAgB,GAAA,qCAEjzCoB,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACElF,EACAyC,GATF,EAEA,KAEA,KAEA,MAUe0C,EAAA,QAAAH,EAAiB","file":"static/js/3.18f25fe29e073caeb43c.js","sourcesContent":["<template>\n  <v-app id=\"inspire\">\n    <v-content>\n      <v-container fluid fill-height>\n        <v-layout align-center justify-center>\n          <v-flex xs12 sm8 md4>\n            <v-card>\n              <v-toolbar dark color=\"primary\">\n                <v-toolbar-title>{{title}}</v-toolbar-title>\n              </v-toolbar>\n              <v-card-text>\n                <v-form ref=\"form\" v-model=\"valid\" lazy-validation>\n                  <v-text-field prepend-icon=\"phone\" label=\"手机号\"\n                                v-model=\"mobile\" :rules=\"mobileRules\" required></v-text-field>\n                  <v-text-field prepend-icon=\"lock\" label=\"密码\" type=\"password\"\n                                v-model=\"password\" :rules=\"passwordRules\" required\n                                @click:append=\"showPassword = !showPassword\"\n                                :append-icon=\"showPassword ? 'visibility_off' : 'visibility'\"\n                                :type=\"showPassword ? 'text' : 'password'\"></v-text-field>\n                </v-form>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"primary\" @click=\"submit\">登录</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-flex>\n        </v-layout>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n<script>\n  import {mapGetters, mapActions} from 'vuex'\n  import {userLogin} from '@/api/core-api'\n\n  const REG = {\n    isMobile: /^1[3456789]\\d{9}$/,\n    isPassword: /^.{4,16}$/\n  };\n\n  export default {\n    name: 'login',\n    data() {\n      return {\n        valid: true,\n        showPassword: false,\n        mobile: '',\n        mobileRules: [\n          v => !!v || '必须填写手机号',\n          v => REG.isMobile.test(v) || '不是合法的手机号'\n        ],\n        password: '',\n        passwordRules: [\n          v => !!v || '必须填写密码',\n          v => REG.isPassword.test(v) || '密码长度应为4-16位'\n        ]\n      }\n    },\n    components: {},\n    methods: {\n      ...mapActions([\n        'setUserInfo',\n        'setUserToken'\n      ]),\n      submit() {\n        if (this.$refs.form.validate()) {\n          let _data = {\n            mobile: this.mobile,\n            password: this.password\n          };\n          // 请求登录\n          userLogin(_data).then((data) => {\n            // 保存登录状态和信息\n            this.setUserInfo(data.data.user);\n            this.setUserToken(data.data.token);\n            if (data.code === 0) {\n              if (this.$route.query.redirect && !this.$route.query.redirect.startsWith('/login')) {\n                this.$router.push({path: this.$route.query.redirect});\n              } else {\n                this.$router.push({path: 'home/index'});\n              }\n            }\n          });\n        }\n      }\n    },\n    computed: {\n      ...mapGetters([\n        'title'\n      ])\n    },\n    created() {\n      this.setUserInfo({});\n      this.setUserToken(null);\n      sessionStorage.clear();\n    }\n  }\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-content',[_c('v-container',{attrs:{\"fluid\":\"\",\"fill-height\":\"\"}},[_c('v-layout',{attrs:{\"align-center\":\"\",\"justify-center\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm8\":\"\",\"md4\":\"\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"dark\":\"\",\"color\":\"primary\"}},[_c('v-toolbar-title',[_vm._v(_vm._s(_vm.title))])],1),_vm._v(\" \"),_c('v-card-text',[_c('v-form',{ref:\"form\",attrs:{\"lazy-validation\":\"\"},model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-text-field',{attrs:{\"prepend-icon\":\"phone\",\"label\":\"手机号\",\"rules\":_vm.mobileRules,\"required\":\"\"},model:{value:(_vm.mobile),callback:function ($$v) {_vm.mobile=$$v},expression:\"mobile\"}}),_vm._v(\" \"),_c('v-text-field',{attrs:{\"prepend-icon\":\"lock\",\"label\":\"密码\",\"type\":\"password\",\"rules\":_vm.passwordRules,\"required\":\"\",\"append-icon\":_vm.showPassword ? 'visibility_off' : 'visibility',\"type\":_vm.showPassword ? 'text' : 'password'},on:{\"click:append\":function($event){_vm.showPassword = !_vm.showPassword}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1)],1),_vm._v(\" \"),_c('v-card-actions',[_c('v-spacer'),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"登录\")])],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0458f047\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/login.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0458f047\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}